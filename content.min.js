document.addEventListener("DOMContentLoaded",function(){function e(){var a=(new Date).getTime();$.ajax({type:"GET",url:l,dataType:"json",timeout:u,success:function(e){$.each(e.result,function(e,a){$("ul.videos").append($('<li class="video"></li>').append($('<div class="video-img"></div>').append($('<a data-id="'+a.movie_id+'" href="/movie/'+a.path+'"></a>').append($('<img src="https://www.gaybeast.com/thumbnails/480x320/'+a.path+'.jpg" width="260" height="173">').on("error",function(){o>1&&n(this)})).append('<span class="video-time">'+a.duration+"</span>"))).append('<div class="video-info"><span class="video-title"><a href="/movie/'+a.path+'">'+a.title+"</a></span></div>"))}),t(o,p,e.pages)},error:function(n){if(c){var t=(new Date).getTime()-a,i="";t<100&&0===n.status&&(i="<p>"+_app.adblockMsg+"</p>"),$("#error-msg span").text(_app.errMsg).append($(i)).parent().show(),_app.send(3,"server error when requesting json; status: "+n.status,window.location.pathname)}else l=l+"&_="+Date.now(),u=4e3,c=!0,e(),_app.send(8,"retrying json request; status: "+n.status,window.location.pathname)}})}function a(e){var a=/\/\w+\/page\/(\d+)/.exec(e);return a?parseInt(a[1]):1}function n(e){if(d.push(e),!r){if(r=!0,"undefined"!=typeof Storage){var a=localStorage.getItem("_resth");if(null!==a&&Date.now()<parseInt(a))return}$("#info-msg span").html('Thumbnails not loading? Just open and close <a href="https://www.gaybeast.com/t" id="a02" target="_blank">this link</a> to fix it.').parent().show(),$("#a01").one("click",function(){"undefined"!=typeof Storage&&localStorage.setItem("_resth",Date.now()+216e5)}),$("#a02").on("click",function(){$("#info-msg").hide(),_app.send(7,"fix thumbnail loading",window.location.pathname),setTimeout(function(){for(var e=0,a=d.length;e<a;e++)d[e].src=d[e].src+"?r=1"},1e3)})}}function t(e,a,n){function t(){d.append(o(1)),d.append(o(2)),d.append(r())}function i(){d.append(r()),d.append(o(n-1)),d.append(o(n))}function o(n){return e===n?$('<li class="active"><span>'+n+"</span></li>"):$('<li><a href="'+a+"/page/"+n+'">'+n+"</a></li>")}function p(){return 1===e?$('<li class="disabled"><span>&laquo; Previous</span></li>'):$('<li><a href="'+a+"/page/"+(e-1)+'">&laquo; Previous</a></li>')}function s(){return e===n?$('<li class="disabled"><span>Next &raquo;</span></li>'):$('<li><a href="'+a+"/page/"+(e+1)+'">Next &raquo;</a></li>')}function r(){return $("<li><span>...</span></li>")}var d=$("#paglist"),l=5,c=2;if(n<=11){d.append(p());for(var u=1;u<=n;u++)d.append(o(u));d.append(s())}else{if(d.append(p()),e<=l-c){for(var u=1;u<=l;u++)d.append(o(u));i()}else if(e<=l+1){for(var u=1;u<=e+c;u++)d.append(o(u));i()}else if(e>=n-(l-c)){t();for(var u=n-l;u<=n;u++)d.append(o(u))}else if(e>=n-l){t();for(var u=e-c;u<=n;u++)d.append(o(u))}else{t();for(var u=e-c;u<=e+c;u++)d.append(o(u));i()}d.append(s())}}if(_app.allowed){var i,o,p,s=window.location.pathname,r=!1,d=[],l,c=!1,u=2e3;p=/\/\w+/.exec(s)[0];var f=document.getElementById("video"),m=$("ul.videos");switch(p){case"/men_and_animals":i=1;break;case"/women_and_animals":i=2;break;case"/animals":i=3;break;default:window.location.replace("/")}document.querySelector('input[name="category"][value="'+i+'"]').checked=!0,o=a(s),l=_app.datadomain+"movies.php?cat="+i+"&start="+(o-1),e()}});